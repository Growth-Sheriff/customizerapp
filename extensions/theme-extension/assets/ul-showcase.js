(function(){
  window.ulShowcaseData=window.ulShowcaseData||{};
  window.openULShowcaseModal=function(btn){var c=btn.closest('.ul-showcase-card'),sec=btn.closest('.ul-showcase-section'),bid=sec.dataset.blockId;if(c&&bid){ulShowcaseData[bid]={vid:c.dataset.variantId,file:null,size:'22x12',price:12};document.getElementById('ulShowcaseImg-'+bid).src=c.dataset.productImage;document.getElementById('ulShowcaseTitle-'+bid).textContent=c.dataset.productTitle;document.getElementById('ulShowcasePrice-'+bid).textContent=c.dataset.productPrice;document.getElementById('ulShowcaseModal-'+bid).classList.add('active');document.body.style.overflow='hidden'}};
  window.closeULShowcaseModal=function(bid){document.getElementById('ulShowcaseModal-'+bid).classList.remove('active');document.body.style.overflow=''};
  window.handleULShowcaseFile=function(e,bid){var f=e.target.files[0];if(!f)return;ulShowcaseData[bid].file=f;document.getElementById('ulShowcaseZone-'+bid).style.display='none';document.getElementById('ulShowcasePreview-'+bid).style.display='block';document.getElementById('ulShowcasePreviewImg-'+bid).src=URL.createObjectURL(f);document.getElementById('ulShowcaseCartBtn-'+bid).disabled=false;document.getElementById('ulShowcaseCartBtn-'+bid).textContent='Add to Cart'};
  window.removeULShowcaseFile=function(bid){ulShowcaseData[bid].file=null;document.getElementById('ulShowcaseZone-'+bid).style.display='';document.getElementById('ulShowcasePreview-'+bid).style.display='none';document.getElementById('ulShowcaseFile-'+bid).value='';document.getElementById('ulShowcaseCartBtn-'+bid).disabled=true;document.getElementById('ulShowcaseCartBtn-'+bid).textContent='Upload design to continue'};
  window.selectULShowcaseSize=function(sel,bid){ulShowcaseData[bid].size=sel.value;ulShowcaseData[bid].price=parseFloat(sel.options[sel.selectedIndex].dataset.price)};
  window.changeULShowcaseQty=function(bid,d){var i=document.getElementById('ulShowcaseQty-'+bid),v=parseInt(i.value)+d;if(v<1)v=1;i.value=v};
  window.addULShowcaseToCart=function(bid){var btn=document.getElementById('ulShowcaseCartBtn-'+bid),qty=parseInt(document.getElementById('ulShowcaseQty-'+bid).value)||1;btn.disabled=true;btn.textContent='Adding...';fetch('/cart/add.js',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({items:[{id:ulShowcaseData[bid].vid,quantity:qty,properties:{'_upload_file':ulShowcaseData[bid].file?.name||'','_sheet_size':ulShowcaseData[bid].size,'_unit_price':'$'+ulShowcaseData[bid].price}}]})}).then(r=>r.json()).then(function(){btn.textContent='âœ“ Added!';setTimeout(function(){closeULShowcaseModal(bid);window.location.href='/cart'},800)}).catch(function(){btn.disabled=false;btn.textContent='Add to Cart'})};
  document.addEventListener('click',function(e){if(e.target.classList.contains('ul-sh-modal-overlay'))closeULShowcaseModal(e.target.id.replace('ulShowcaseModal-',''))});
})();
